/*!
 * bootstrap-limit.js 0.1.1
 * https://github.com/trongrg/bootstrap-limit
 * Copyright 2013 TrongTran and other contributors; Licensed MIT
 */

(function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?t(require("jquery")):t(jQuery)})(function(t){"use strict";var e=function(e,i){this.$element=t(e),this.options=t.extend({},t.fn.limit.defaults,{maxLength:parseInt(this.$element.attr("maxlength"),10)},i),this.$counter=t(this.options.counter)||this.$counter,this.initialize()};e.prototype={constructor:e,initialize:function(){this.initEvents(),this.update(),this.options.removeMaxLengthAttr&&this.$element.removeAttr("maxlength");var e=this;t.when.apply(t,this.$element.get()).always(function(){setTimeout(function(){e.$element.trigger("bootstrap-limit:initialized")},0)})},initEvents:function(){this.$element.on("keypress",t.proxy(this.keypress,this)).on("keyup",t.proxy(this.keyup,this))},update:function(){this.query=this.$element.val(),this.$counter.text(this.options.maxLength-this.query.length),this.query.length>this.options.maxLength?(this.$counter.css("color",this.options.color),this.$element.trigger("bootstrap-limit:crossed")):this.query.length>this.options.maxLength-this.options.threshold?(this.$counter.css("color",this.options.color),this.$element.trigger("bootstrap-limit:uncrossed")):(this.$counter.removeAttr("style"),this.$element.trigger("bootstrap-limit:uncrossed"))},keyup:function(t){this.update(),t.stopPropagation(),t.preventDefault()},keypress:function(t){this.update(),t.stopPropagation()}},t.fn.limit=function(i){return this.each(function(){var o=t(this),n=o.data("bootstrap-limit"),s="object"==typeof i&&i;n||o.data("bootstrap-limit",n=new e(this,s)),"string"==typeof i&&n[i]()})},t.fn.limit.defaults={maxLength:140,color:"red",threshold:10,counter:"",removeMaxLengthAttr:!1},t.fn.limit.Constructor=e,t(function(){t("body").on("focus.bootstrap-limit.data-api",'[data-provide="bootstrap-limit"]',function(e){var i=t(this);i.data("bootstrap-limit")||(e.preventDefault(),i.limit(i.data()))})})});